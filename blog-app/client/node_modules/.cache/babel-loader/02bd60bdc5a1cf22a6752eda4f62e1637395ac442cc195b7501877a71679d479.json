{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\muthu\\\\OneDrive\\\\Desktop\\\\smaple-blog\\\\blog-app\\\\client\\\\src\\\\components\\\\Blog\\\\CreatePost.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../../utils/axios';\nimport './CreatePost.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreatePost = () => {\n  _s();\n  const navigate = useNavigate();\n  const fileInputRef = useRef(null);\n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    category: 'general',\n    tags: []\n  });\n  const [touched, setTouched] = useState({\n    title: false,\n    content: false\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [image, setImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const handleBlur = field => {\n    setTouched(prev => ({\n      ...prev,\n      [field]: true\n    }));\n  };\n  const validateField = (name, value) => {\n    switch (name) {\n      case 'title':\n        return !value.trim() ? 'Title is required' : '';\n      case 'content':\n        return !value.trim() ? 'Content is required' : '';\n      default:\n        return '';\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setError(error);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Mark all fields as touched\n    setTouched({\n      title: true,\n      content: true\n    });\n\n    // Validate all fields\n    const titleError = validateField('title', formData.title);\n    if (titleError) {\n      setError(titleError);\n      return;\n    }\n    const contentError = validateField('content', formData.content);\n    if (contentError) {\n      setError(contentError);\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Please login to create a post');\n      }\n      const formDataToSend = new FormData();\n      formDataToSend.append('title', formData.title.trim());\n      formDataToSend.append('content', formData.content.trim());\n      formDataToSend.append('category', formData.category);\n      if (image) {\n        formDataToSend.append('image', image);\n      }\n      const response = await api.post('/blog', formDataToSend, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.data.success) {\n        navigate(`/post/${response.data.post._id}`);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Create post error:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to create post');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-post-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-post-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Create New Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        noValidate: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            children: [\"Title \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"required\",\n              children: \"*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"title\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleChange,\n            onBlur: () => handleBlur('title'),\n            className: `form-input ${touched.title && !formData.title.trim() ? 'invalid' : ''}`,\n            placeholder: \"Enter post title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), touched.title && !formData.title.trim() && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field-error\",\n            children: \"Title is required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n};\n_s(CreatePost, \"yT9HgRUyBYMGoZkuDEo6fM7jDEc=\", false, function () {\n  return [useNavigate];\n});\n_c = CreatePost;\nexport default CreatePost;\nvar _c;\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"names":["React","useState","useRef","useNavigate","api","jsxDEV","_jsxDEV","CreatePost","_s","navigate","fileInputRef","formData","setFormData","title","content","category","tags","touched","setTouched","loading","setLoading","error","setError","image","setImage","imagePreview","setImagePreview","handleBlur","field","prev","validateField","name","value","trim","handleChange","e","target","handleSubmit","preventDefault","titleError","contentError","token","localStorage","getItem","Error","formDataToSend","FormData","append","response","post","headers","data","success","_id","err","_err$response","_err$response$data","console","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","noValidate","htmlFor","type","id","onChange","onBlur","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/muthu/OneDrive/Desktop/smaple-blog/blog-app/client/src/components/Blog/CreatePost.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../../utils/axios';\r\nimport './CreatePost.css';\r\n\r\nconst CreatePost = () => {\r\n    const navigate = useNavigate();\r\n    const fileInputRef = useRef(null);\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        content: '',\r\n        category: 'general',\r\n        tags: []\r\n    });\r\n\r\n    const [touched, setTouched] = useState({\r\n        title: false,\r\n        content: false\r\n    });\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [image, setImage] = useState(null);\r\n    const [imagePreview, setImagePreview] = useState(null);\r\n\r\n    const handleBlur = (field) => {\r\n        setTouched(prev => ({\r\n            ...prev,\r\n            [field]: true\r\n        }));\r\n    };\r\n\r\n    const validateField = (name, value) => {\r\n        switch (name) {\r\n            case 'title':\r\n                return !value.trim() ? 'Title is required' : '';\r\n            case 'content':\r\n                return !value.trim() ? 'Content is required' : '';\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n\r\n        if (touched[name]) {\r\n            const error = validateField(name, value);\r\n            setError(error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // Mark all fields as touched\r\n        setTouched({\r\n            title: true,\r\n            content: true\r\n        });\r\n\r\n        // Validate all fields\r\n        const titleError = validateField('title', formData.title);\r\n        if (titleError) {\r\n            setError(titleError);\r\n            return;\r\n        }\r\n\r\n        const contentError = validateField('content', formData.content);\r\n        if (contentError) {\r\n            setError(contentError);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                throw new Error('Please login to create a post');\r\n            }\r\n\r\n            const formDataToSend = new FormData();\r\n            formDataToSend.append('title', formData.title.trim());\r\n            formDataToSend.append('content', formData.content.trim());\r\n            formDataToSend.append('category', formData.category);\r\n            \r\n            if (image) {\r\n                formDataToSend.append('image', image);\r\n            }\r\n\r\n            const response = await api.post('/blog', formDataToSend, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n\r\n            if (response.data.success) {\r\n                navigate(`/post/${response.data.post._id}`);\r\n            }\r\n        } catch (err) {\r\n            console.error('Create post error:', err);\r\n            setError(err.response?.data?.message || 'Failed to create post');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"create-post-container\">\r\n            <div className=\"create-post-card\">\r\n                <h1>Create New Post</h1>\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n                \r\n                <form onSubmit={handleSubmit} noValidate>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"title\">\r\n                            Title <span className=\"required\">*</span>\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"title\"\r\n                            name=\"title\"\r\n                            value={formData.title}\r\n                            onChange={handleChange}\r\n                            onBlur={() => handleBlur('title')}\r\n                            className={`form-input ${touched.title && !formData.title.trim() ? 'invalid' : ''}`}\r\n                            placeholder=\"Enter post title\"\r\n                        />\r\n                        {touched.title && !formData.title.trim() && (\r\n                            <div className=\"field-error\">Title is required</div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* ... rest of your form ... */}\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreatePost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}